# 테스트 가능한 설계
- 테스트 가능성
  - 테스트 대상 시스템이나 클래스, 메서드에 대해 자동으로 테스트를 얼마나 쉽게 작성할 수 있는가?
  
### 도메인 코드에서 인프라 코드를 분리
- 도메인
  - 시스템의 핵심이 있는 곳
- 인프라
  - 외부 의존성을 다루는 코드 
  - 데이터 접근 객체
- 책임이 클 수록 더 복잡해지고 버그가 많아짐
- 명확한 책임 분리가 필요함
  - 포트와 어뎁터 패턴으로 설명 가능
  - 인프라에 직접 의존하기보다 포트를 사용
  - 포트는 인프라가 할 수 있는 일을 정의한 인터페이스
  - 애플리케이션은 인터페이스를 통해 외부와 소통
  - 어댑터는 포터의 구현체로 데이터베이스나 웹 서비스 등과 소통하는 일을 수행

- 쇼핑 카트 시스템 예시 
  - 결제가 완료된 쇼핑 카트를 배송 준비 상태로 설정하고 새로운 상태를 데이터베이스에 영속화
  - 상품을 고객에게 전달해야 한다고 배송 센터에 알림
  - 고객에게 결제가 잘 이루어졌다는 이메일을 보냄
    - 이메일은 배송 예상 날짜를 포함해야 함
    - 이 정보는 배송 센터 API로 얻을 수 있음
  - 헥사고날 아키텍처 적용의 첫 단계 
    - 애플리케이션에 속한 것과 그렇지 않은 것을 구분하는 일
    - 상태 변경과 같은 ShoppingCart의 비즈니스 규칙뿐 아니라, 결제가 일어난 후 쇼핑 카트에 대한 전체 작업 흐름이 육각형 안에 속함
    - 이메일 전송, 배송 센터 API 등의 호출은 외부 시스템이 다룸